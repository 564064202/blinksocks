'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.Address=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=require('lodash.padstart');var _lodash2=_interopRequireDefault(_lodash);var _common=require('../../proxies/common');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var Address=exports.Address=function(){function Address(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Address);var fields=_extends({ATYP:_common.ATYP_V4,DSTADDR:[_common.NOOP,_common.NOOP,_common.NOOP,_common.NOOP],DSTPORT:[_common.NOOP,_common.NOOP]},options);if(![_common.ATYP_V4,_common.ATYP_V6,_common.ATYP_DOMAIN].includes(fields.ATYP)){throw Error('ATYP should be ATYP_V4, ATYP_V6 or ATYP_DOMAIN')}if(!Array.isArray(fields.DSTADDR)&&!(fields.DSTADDR instanceof Buffer)){throw Error('DSTADDR must be Array or buffer')}if(fields.ATYP===_common.ATYP_V4&&fields.DSTADDR.length!==4){throw Error('DSTADDR.length must be 4')}if(fields.ATYP===_common.ATYP_V6&&fields.DSTADDR.length!==16){throw Error('DSTADDR.length must be 16')}if(!Array.isArray(fields.DSTPORT)&&!(fields.DSTPORT instanceof Buffer)){throw Error('DSTPORT must be Array or Buffer')}if(fields.DSTPORT.length!==2){throw Error('DSTPORT.length must be 2')}this.ATYP=fields.ATYP;this.DSTADDR=fields.DSTADDR;this.DSTPORT=fields.DSTPORT}/**
   * convert DSTADDR and DSTPORT to String and Number
   * @returns {[*,*]}
   */_createClass(Address,[{key:'getEndPoint',value:function getEndPoint(){var ATYP=this.ATYP,DSTADDR=this.DSTADDR,DSTPORT=this.DSTPORT;var host=null;switch(ATYP){case _common.ATYP_V4:host=DSTADDR.join('.');break;case _common.ATYP_V6:{var array=[];for(var i=0;i<16;i+=2){array.push((0,_lodash2.default)(DSTADDR[i].toString(16),2,'0')+(0,_lodash2.default)(DSTADDR[i+1].toString(16),2,'0'))}host=array.join(':');break}case _common.ATYP_DOMAIN:host=DSTADDR.toString();break;default:throw Error('unknown ATYP: '+ATYP);}var port=Buffer.from(DSTPORT).readUInt16BE(0);return[host,port]}},{key:'toString',value:function toString(){return this.getEndPoint().join(':')}}]);return Address}();